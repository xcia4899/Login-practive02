import{d as x,g as i,c as d,a as e,i as m,w as I,v as k,h as u,t as n,b as p,o as c,_ as P}from"./index-BVrYrUv_.js";import{u as C,s as D,a as f}from"./useFetchState-aQcMHyyP.js";const E={class:"test-page"},M={class:"test-top"},N={key:0},T={key:1,class:"test-body"},V={class:"item"},A={class:"item"},B={class:"item"},S=x({__name:"testApi04",setup(U){const{openContent:v,showMessage:r,setState:a}=C(),o=i({id:null,name:"",status:""}),l=i("");i(!1),r.value="點擊'取得清單'以獲取資料";const _=s=>f.put("https://petstore.swagger.io/v2/pet",s),g=async()=>{if(!o.value||!o.value.id){a(!0,"請先取得資料再進行更新");return}if(a(!1,"修改中..."),await D(400),!l.value){a(!1,"名稱不能留空");return}try{const s={...o.value,name:l.value},t=await _(s);o.value=t.data,console.log("成功更新名稱"),a(!1,"已更新名稱")}catch(s){console.log("失敗",s),a(!1,"更新失敗")}},y=s=>f.get(`https://petstore.swagger.io/v2/pet/${s}`),b=async()=>{const s=h(1,99);a(!0,"讀取中...");try{let t=await y(s);o.value=t.data,a(!1,"成功讀取資料!")}catch(t){console.log("失敗",t),a(!0,"沒有資料，點擊按鈕重新取得")}},h=(s,t)=>Math.floor(Math.random()*(t-s+1))+s;return(s,t)=>(c(),d("div",E,[e("div",M,[e("div",null,[e("button",{type:"button",onClick:b},"取得清單")]),e("div",null,[I(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=w=>l.value=w)},null,512),[[k,l.value]]),e("button",{type:"button",onClick:g},"修改名稱")])]),t[4]||(t[4]=e("h3",null,"API04練習: PUT（更新資料））&& DELETE（刪除資料）",-1)),t[5]||(t[5]=e("hr",null,null,-1)),u(v)?(c(),d("h3",N,n(u(r)),1)):m("",!0),u(v)?m("",!0):(c(),d("div",T,[e("h3",null,n(u(r)),1),e("div",V,[t[1]||(t[1]=e("b",null,"ID:",-1)),p(n(o.value.id),1)]),e("div",A,[t[2]||(t[2]=e("b",null,"名稱:",-1)),p(n(o.value.name),1)]),e("div",B,[t[3]||(t[3]=e("b",null,"類型:",-1)),p(n(o.value.status),1)])]))]))}}),$=P(S,[["__scopeId","data-v-20d3c340"]]);export{$ as default};
